---
description: IndexAll 浏览器扩展开发规范。编辑 extension 包时自动加载。
globs: packages/extension/**
alwaysApply: false
---

# IndexAll 浏览器扩展开发规范

## 开始前必读

- 涉及扩展 UI → 先读 `UI_DESIGN.md`（"浏览器扩展"部分）
- 需要调用 API → 先读 `API_DESIGN.md`（"浏览器扩展使用的接口"部分）

## 框架

- WXT（现代浏览器扩展框架，支持 React + TypeScript + HMR）
- Popup 弹窗为主要交互界面

## 交互流程

1. 打开弹窗 → 自动填入当前页面标题和 URL
2. 调用 `resource.getByUrl` 判断是否已收藏
3. 未收藏 → 选择标签 → `resource.create` 保存
4. 已收藏 → 显示已有标签，按钮变为"更新"，可追加标签 → `resource.addTag`

## 关键约定

- 标签选择器与 Web UI **完全一致**（复用 shared 或保持行为一致）
- 保存后显示成功提示
- 底部提示该域名下已收藏数量

## 变更后维护

- 修改扩展 UI 或交互 → 更新 `UI_DESIGN.md` 浏览器扩展部分
